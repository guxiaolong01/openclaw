# OpenClaw镜像同步指南

## 概述

本文档描述了如何设置和维护OpenClaw官方源代码的镜像仓库。

## 同步策略

### 1. 自动同步
- **频率**: 每日UTC时间00:00
- **触发**: GitHub Actions定时任务
- **检查**: 自动检测官方仓库更新
- **处理**: 自动合并并推送

### 2. 手动同步
- **触发**: 需要立即同步时
- **命令**: `./sync-scripts/manual-sync.sh`
- **权限**: 需要Git推送权限

### 3. 强制同步
- **场景**: 当自动同步失败或需要重置时
- **方法**: 在GitHub Actions中手动触发并选择"强制同步"

## 同步流程

### 正常流程
1. 检查官方仓库是否有新提交
2. 如果有更新，拉取最新代码
3. 合并到本地分支
4. 推送到镜像仓库
5. 发送同步结果通知

### 冲突处理
1. **简单冲突**: 自动解决
2. **复杂冲突**: 记录日志并通知维护者
3. **无法解决**: 跳过本次同步，等待人工处理

## 监控和维护

### 监控指标
- 同步成功率
- 同步延迟
- 冲突频率
- 仓库大小增长

### 维护任务
1. **定期检查**: 每周检查同步日志
2. **冲突解决**: 及时处理同步冲突
3. **存储管理**: 监控仓库大小
4. **权限管理**: 更新访问令牌

## 故障排除

### 常见问题

#### 1. 同步失败
- **症状**: GitHub Actions显示失败
- **原因**: 网络问题、权限问题、冲突
- **解决**: 检查日志，手动运行同步脚本

#### 2. 更新延迟
- **症状**: 镜像落后官方多个版本
- **原因**: 同步任务被跳过
- **解决**: 手动触发同步

#### 3. 仓库过大
- **症状**: 克隆缓慢，存储占用高
- **原因**: 历史记录积累
- **解决**: 考虑使用浅克隆或归档旧版本

## 扩展功能

### 1. 多分支支持
可以扩展支持多个分支的同步：
- `main`: 稳定版
- `develop`: 开发版
- 版本标签: 特定版本

### 2. 备份策略
- 定期创建仓库快照
- 存储到其他Git服务
- 本地备份

### 3. 状态报告
- 自动生成同步报告
- 发送到飞书/邮件
- 更新README状态徽章
